(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{8350:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fleet/[id]",function(){return a(4403)}])},4403:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return w},default:function(){return b}});var s=a(5893),l=a(8705),n=a(1163),i=a(7294),r=a(2160),d=a(2920);let c=e=>{let{instances:t,loading:a,setInstance:l,setInstanceModal:n}=e;return(0,s.jsxs)("div",{className:"overflow-auto ",children:[(0,s.jsx)("h2",{className:"text-2xl mt-2",children:"Instances"}),(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 mt-4",children:[(0,s.jsx)("thead",{className:"bg-gray-100  divide-y divide-gray-200",children:(0,s.jsxs)("tr",{className:"grid grid-cols-7",children:[(0,s.jsx)("th",{children:(0,s.jsx)("span",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Instance ID"})}),(0,s.jsx)("th",{children:(0,s.jsx)("span",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Instance Type"})}),(0,s.jsx)("th",{children:(0,s.jsx)("span",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Instance Lifecycle"})}),(0,s.jsx)("th",{children:(0,s.jsx)("span",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Instance State"})}),(0,s.jsx)("th",{children:(0,s.jsx)("span",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Launch Time"})}),(0,s.jsx)("th",{children:(0,s.jsx)("span",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider grid-cols-2",children:"Tags"})})]})}),a.instances?(0,s.jsx)("p",{children:"Loading..."}):(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 text-center",children:null==t?void 0:t.map(e=>{var t,a;return(0,s.jsxs)("tr",{className:"grid grid-cols-7 cursor-pointer hover:bg-gray-100",onClick:()=>{l(e),n(!0)},children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"text-sm text-gray-900",children:null==e?void 0:e.InstanceId})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"text-sm text-gray-900",children:null==e?void 0:e.InstanceType})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"text-sm text-gray-900",children:(null==e?void 0:e.InstanceLifecycle)||"on-demand"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-green-800",children:null==e?void 0:null===(t=e.State)||void 0===t?void 0:t.Name})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-green-800",children:new Date(null==e?void 0:e.LaunchTime).toLocaleString()})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap flex flex-wrap grid-cols-2",children:null==e?void 0:null===(a=e.Tags)||void 0===a?void 0:a.map(e=>(0,s.jsxs)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[null==e?void 0:e.Key," : ",null==e?void 0:e.Value]},null==e?void 0:e.Key))})]},null==e?void 0:e.InstanceId)})})]})]})},o=e=>{let{fleetLTs:t,setLaunchTemplateModal:a,setLaunchTemplate:l}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl mt-2",children:"Launch Templates"}),(0,s.jsx)("div",{children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 mt-4",children:[(0,s.jsx)("thead",{className:"bg-gray-100  divide-y divide-gray-200",children:(0,s.jsxs)("tr",{className:"grid grid-cols-6 gap-4 text-center",children:[(0,s.jsx)("th",{className:"px-4 py-2",children:(0,s.jsx)("span",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"})}),(0,s.jsx)("th",{className:"px-4 py-2",children:(0,s.jsx)("span",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Version"})}),(0,s.jsx)("th",{className:"px-4 py-2",children:(0,s.jsx)("span",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"})}),(0,s.jsx)("th",{className:"px-4 py-2",children:(0,s.jsx)("span",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CreatedBy"})}),(0,s.jsx)("th",{className:"px-4 py-2",children:(0,s.jsx)("span",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CreatedOn"})}),(0,s.jsx)("th",{className:"px-4 py-2",children:(0,s.jsx)("span",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Default Version"})})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 text-center",children:null==t?void 0:t.map(e=>(0,s.jsxs)("tr",{className:"grid grid-cols-6 gap-4 text-center font-normal cursor-pointer hover:bg-gray-100 py-2",onClick:()=>{l(e),a(!0)},children:[(0,s.jsx)("td",{className:"px-4 py-2",children:e.LaunchTemplateName}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.VersionNumber}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.LaunchTemplateId}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.CreatedBy}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.CreateTime}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.DefaultVersion?(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"true"}):(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"false"})})]},e.LaunchTemplateId))})]})})]})};var x=a(7230),u=a(3023),m=a(5358),p=a(4195),h=a(4888),f=a(9264),v=a(6880);let g=e=>{var t;let{region:a,toggleModal:l,instance:n,url:c}=e,[o,j]=(0,i.useState)(null),[N,y]=(0,i.useState)(null),[w,b]=(0,i.useState)(null),I=(0,i.useRef)(""),T=async()=>{var e,t;let s=await (0,r.LD)(a,n.InstanceId,c);if(200!==s.status){d.Am.error("Error fetching CPU Utilization data!");return}null===(e=s.data.Datapoints)||void 0===e||e.sort((e,t)=>new Date(e.Timestamp).getTime()-new Date(t.Timestamp).getTime()),null===(t=s.data.Datapoints)||void 0===t||t.forEach(e=>{e.Timestamp=new Date(e.Timestamp).toLocaleTimeString()}),j(s.data.Datapoints)},k=async()=>{let e=await (0,r.Xd)(a,n.InstanceId,c);if(200!==e.status){d.Am.error("Error fetching Network In data!");return}e.data.Datapoints.sort((e,t)=>new Date(e.Timestamp).getTime()-new Date(t.Timestamp).getTime()),e.data.Datapoints.forEach(e=>{e.Timestamp=new Date(e.Timestamp).toLocaleTimeString()}),y(e.data.Datapoints)},D=async()=>{var e,t;let s=await (0,r.K3)(a,n.InstanceId,c);if(200!==s.status){d.Am.error("Error fetching Network Out data!");return}null===(e=s.data.Datapoints)||void 0===e||e.sort((e,t)=>new Date(e.Timestamp).getTime()-new Date(t.Timestamp).getTime()),null===(t=s.data.Datapoints)||void 0===t||t.forEach(e=>{e.Timestamp=new Date(e.Timestamp).toLocaleTimeString()}),b(s.data.Datapoints)};return(0,i.useEffect)(()=>{I.current!==n.InstanceId&&(I.current=n.InstanceId,T(),k(),D())},[g]),(0,i.useEffect)(()=>{},[n]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-scroll fixed inset-0 z-50 outline-none focus:outline-none mb-4",children:(0,s.jsx)("div",{className:"relative w-auto my-6 mx-auto ",style:{height:"90vh",width:"90vw"},children:(0,s.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none ",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between p-5 border-b border-solid border-slate-200 rounded-t",children:[(0,s.jsx)("h3",{className:"text-3xl font-semibold",children:"Instance Details"}),(0,s.jsx)("button",{className:"p-1 ml-auto bg-transparent border-0 text-black  float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:l,children:(0,s.jsx)("span",{className:"bg-transparent text-black  h-6 w-6 text-2xl block outline-none focus:outline-none",children:"X"})})]}),(0,s.jsx)("div",{className:"relative p-6 flex-auto text-lg",children:n&&(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex flex-row",children:["Instance ID : ",n.InstanceId]}),(0,s.jsxs)("div",{className:"flex flex-row",children:["VPC ID : ",n.VpcId]}),(0,s.jsxs)("div",{className:"flex flex-row",children:["Private IPs :"," ",null===(t=n.NetworkInterfaces[0].PrivateIpAddresses)||void 0===t?void 0:t.map((e,t)=>{var a;return(0,s.jsxs)("div",{children:[e.PrivateIpAddress,(null===(a=n.NetworkInterfaces[0].PrivateIpAddresses)||void 0===a?void 0:a.length)>t+1&&", "]},e.PrivateIpAddress)})]}),(0,s.jsxs)("div",{className:"flex flex-row",children:["Public IPs : ",n.PublicIpAddress]}),(0,s.jsxs)("div",{className:"flex flex-row",children:["Instance Type : ",n.InstanceType]}),(0,s.jsxs)("div",{className:"flex flex-row",children:["Availability Zone : ",n.Placement.AvailabilityZone]}),(0,s.jsxs)("div",{className:"flex flex-row",children:["Instance Lifecycle :"," ",n.InstanceLifecycle||"on-demand"]}),(0,s.jsxs)("div",{className:"flex flex-row",children:["Launch Time : ",n.LaunchTime]}),(0,s.jsxs)("div",{className:"flex flex-row",children:["Status check : ",n.State.Name]}),(0,s.jsxs)("div",{className:"my-4 text-base",children:[(0,s.jsx)("p",{className:"text-lg",children:"CPU Utilization (in Percentage) :"}),(0,s.jsxs)(x.w,{width:700,height:400,data:o,className:"mt-2",children:[(0,s.jsx)(u.K,{dataKey:"Timestamp"}),(0,s.jsx)(m.B,{}),(0,s.jsx)(p.q,{strokeDasharray:"3 3"}),(0,s.jsx)(h.u,{}),(0,s.jsx)(f.D,{}),(0,s.jsx)(v.x,{type:"monotone",dataKey:"Average",stroke:"#8884d8"})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-6  text-base",children:[(0,s.jsxs)("div",{className:"my-4",children:[(0,s.jsx)("p",{className:"text-lg",children:"Network In matrics (in bytes):"}),(0,s.jsxs)(x.w,{width:700,height:400,data:N,className:"mt-2",children:[(0,s.jsx)(u.K,{dataKey:"Timestamp"}),(0,s.jsx)(m.B,{}),(0,s.jsx)(p.q,{strokeDasharray:"3 3"}),(0,s.jsx)(h.u,{}),(0,s.jsx)(f.D,{}),(0,s.jsx)(v.x,{type:"monotone",dataKey:"Average",stroke:"#8884d8"})]})]}),(0,s.jsxs)("div",{className:"my-4",children:[(0,s.jsx)("p",{className:"text-lg",children:"Network out matrics (in bytes):"}),(0,s.jsxs)(x.w,{width:700,height:400,data:w,className:"mt-2",children:[(0,s.jsx)(u.K,{dataKey:"Timestamp"}),(0,s.jsx)(m.B,{}),(0,s.jsx)(p.q,{strokeDasharray:"3 3"}),(0,s.jsx)(h.u,{}),(0,s.jsx)(f.D,{}),(0,s.jsx)(v.x,{type:"monotone",dataKey:"Average",stroke:"#8884d8"})]})]})]})]})})]})})}),(0,s.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]})},j=e=>{var t,a,l,n,i;let{fleetLt:r,toggleModal:d}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:(0,s.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:(0,s.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between p-5 border-b border-solid border-slate-200 rounded-t",children:[(0,s.jsx)("h3",{className:"text-3xl font-semibold",children:"Launch Template Details"}),(0,s.jsx)("button",{className:"p-1 ml-auto bg-transparent border-0 text-black float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:d,children:(0,s.jsx)("span",{className:"bg-transparent text-black h-6 w-6 text-2xl block outline-none focus:outline-none",children:"X"})})]}),(0,s.jsxs)("div",{className:"relative p-6 flex-auto text-lg",children:["subnet:"," ",r.LaunchTemplateData.NetworkInterfaces.map(e=>(0,s.jsx)("span",{children:e.SubnetId},e.SubnetId))," ",(0,s.jsx)("br",{}),"vpc id: \xa0",r.LaunchTemplateData.NetworkInterfaces[0].VpcId||"Not Available"," ",(0,s.jsx)("br",{}),"security group IDs:"," ",null===(t=r.LaunchTemplateData.NetworkInterfaces[0].Groups)||void 0===t?void 0:t.map((e,t)=>{var a,l,n;return(0,s.jsxs)("span",{children:[e,(null===(a=null===(l=r.LaunchTemplateData)||void 0===l?void 0:l.NetworkInterfaces[0])||void 0===a?void 0:null===(n=a.Groups)||void 0===n?void 0:n.length)-1>t&&", "]},e)}),(0,s.jsx)("br",{}),"Tags:"," ",(null===(a=r.LaunchTemplateData)||void 0===a?void 0:a.TagSpecifications)?null===(l=null===(n=r.LaunchTemplateData)||void 0===n?void 0:n.TagSpecifications[0])||void 0===l?void 0:null===(i=l.Tags)||void 0===i?void 0:i.map((e,t)=>(0,s.jsxs)("span",{className:"px-2 text-xs leading-5 font-semibold rounded-full bg-violet-200 text-green-800",children:[e.Key,": ",e.Value]},e.Key)):"Not Available"]})]})})}),(0,s.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]})};var N=a(9542);let y=e=>{let t=(0,n.useRouter)(),[a,x]=(0,i.useState)(""),[u,m]=(0,i.useState)({instances:!0,launchTemplate:!0,main:!1}),[p,h]=(0,i.useState)(""),[f,v]=(0,i.useState)([]),[y,w]=(0,i.useState)([]),[b,I]=(0,i.useState)(!1),[T,k]=(0,i.useState)(null),[D,L]=(0,i.useState)(!1),[S,A]=(0,i.useState)(null),[E,P]=(0,i.useState)(),C=()=>{let{id:e}=t.query;e&&x(e)},_=async()=>{var t,s,l,n,i,c,o;m({...u,instances:!0});let x=await (0,r.$C)(p,a,e.url);if(200!==x.status){d.Am.error("Error fetching instances!"),m({...u,instances:!1});return}P({cpu:null===(t=x.data)||void 0===t?void 0:t.avgFleetCPUUtilization,nwIn:null===(s=x.data)||void 0===s?void 0:s.avgFleetNWIn,nwOut:null===(l=x.data)||void 0===l?void 0:l.avgFleetNWOut}),x.data=null===(n=x.data)||void 0===n?void 0:n.instances.flat(1);for(let e=0;e<(null===(i=x.data)||void 0===i?void 0:i.length);e++)x.data[e]=null===(o=x.data[e])||void 0===o?void 0:o.Instances;x.data=null===(c=x.data)||void 0===c?void 0:c.flat(1),v(x.data),m({...u,instances:!1})},K=async()=>{var t,s;m({...u,launchTemplate:!0});let l=await (0,r.JR)(p,a,e.url);if(200!==l.status){m({...u,launchTemplate:!1});return}let n=[];for(let e=0;e<(null===(t=l.data)||void 0===t?void 0:t.length);e++)for(let t=0;t<(null===(s=l.data[e].LaunchTemplateVersions)||void 0===s?void 0:s.length);t++)n.push(l.data[e].LaunchTemplateVersions[t]);w(n),m({...u,launchTemplate:!1})};return(0,i.useEffect)(()=>{D&&I(!1)},[D]),(0,i.useEffect)(()=>{b&&L(!1)},[b]),(0,i.useEffect)(()=>{h(localStorage.getItem("region")||"ap-south-1")},[]),(0,i.useEffect)(()=>{t.isReady&&!a&&C()},[t.isReady]),(0,i.useEffect)(()=>{a&&p&&(_(),K())},[a,p]),(0,s.jsxs)(l.Z,{props:e,children:[(0,s.jsx)(d.Ix,{}),b&&(0,s.jsx)(g,{instance:T,toggleModal:()=>{k(null),I(!1)},region:p,url:e.url}),D&&(0,s.jsx)(j,{fleetLt:S,toggleModal:()=>{A(null),L(!1)}}),u.main&&(0,s.jsx)(N.Z,{}),(0,s.jsxs)("h2",{className:"text-xl",children:["Fleet ID : ",a]}),(0,s.jsxs)("h3",{className:"text-xl",children:["Fleet Avg CPU Utilization : ",null==E?void 0:E.cpu]}),(0,s.jsxs)("h3",{className:"text-xl",children:["Fleet Avg Network In : ",null==E?void 0:E.nwIn]}),(0,s.jsxs)("h3",{className:"text-xl",children:["Fleet Avg Network Out : ",null==E?void 0:E.nwOut]}),(0,s.jsx)("div",{className:"bg-blue-50 shadow-xl",style:{height:"42vh",overflowY:"scroll"},children:(0,s.jsx)(c,{instances:f,loading:u.instances,setInstanceModal:I,setInstance:k})}),(0,s.jsx)("div",{className:"bg-green-50 shadow-xl",style:{height:"42vh",overflowY:"scroll"},children:(0,s.jsx)(o,{fleetLTs:y,setLaunchTemplateModal:L,setLaunchTemplate:A})})]})};var w=!0,b=y}},function(e){e.O(0,[455,844,744,774,888,179],function(){return e(e.s=8350)}),_N_E=e.O()}]);